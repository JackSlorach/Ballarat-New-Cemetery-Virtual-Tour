/* ===== Top HUD (compass on top, chip under it) ===== */
#label-hud{
  position:fixed; top:8px; left:50%; transform:translateX(-50%);
  z-index:999999; pointer-events:none;
  display:flex; flex-direction:column; align-items:center; gap:6px;
}

/* Linear compass bar */
#label-compass{
  width:min(520px,86vw); height:44px; position:relative;
  background:linear-gradient(to bottom, rgba(0,0,0,.28), rgba(0,0,0,.18));
  border-radius:8px; overflow:hidden; opacity:.98;
  box-shadow:0 2px 10px rgba(0,0,0,.25);
}
#label-compass.hidden{ display:none; }

/* center caret */
#comp-caret{
  position:absolute; top:0; left:50%; transform:translateX(-50%);
  width:0; height:0; border-left:6px solid transparent; border-right:6px solid transparent;
  border-top:10px solid #fff; filter:drop-shadow(0 1px 1px rgba(0,0,0,.5));
}

/* scrollable ruler */
#comp-ruler{
  position:absolute; left:0; top:18px; height:26px; will-change:transform;
  display:block; white-space:nowrap;
}

/* ticks */
.tick{ position:absolute; bottom:6px; width:1px; background:rgba(255,255,255,.6); }
.tick.minor{ height:6px; opacity:.55; }
.tick.major{ height:10px; opacity:.85; }
.tick.cardinal{ height:12px; background:#fff; }

.tick-label{
  position:absolute; bottom:12px; transform:translateX(-50%);
  font:600 12px/1 system-ui, sans-serif; color:#fff; text-shadow:0 1px 2px rgba(0,0,0,.6);
  opacity:.95;
}
.tick-cardinal-label{ bottom:12px; font-size:14px; letter-spacing:.5px; }

/* If you don't want area markers, keep these hidden */
.area-mark, .area-dot { display:none !important; }

/* Centered under-compass chip */
#comp-chip{
  position: fixed;
  top: 46px;                 /* sits just under your compass bar; tweak if needed */
  left: 50%;
  transform: translateX(-50%);
  padding: 6px 12px;
  font-size: 14px;
  line-height: 1;
  background: rgba(36,38,43,.92);
  color: #fff;
  border-radius: 14px;
  box-shadow: 0 6px 18px rgba(0,0,0,.35);
  opacity: 0;
  pointer-events: none;
  transition: opacity .18s ease;
  z-index: 99998;
}
#comp-chip.visible{ opacity: 1; }
/* Completely disable compass + chip on mobile/touch */
@media (max-width: 900px), (pointer: coarse) {
  #label-compass,
  #comp-chip {
    display: none !important;
  }
}

/* --- Hard clip the contents to the rounded box --- */
#label-compass{
  /* you already have overflow:hidden; keep it */
  overflow: hidden;
  /* force clipping even with GPU transforms/filters */
  clip-path: inset(0 round 8px);   /* respects the same 8px radius */
  contain: paint;                  /* isolate painting to this box */
}

/* Make sure all moving parts are clipped and non-interactive */
#comp-ruler, .tick, .tick-label {
  pointer-events: none;
  user-select: none;
}

/* (Optional) small fade at the left/right edges so half labels
   look neat when they approach the border */
#label-compass::before,
#label-compass::after{
  content: "";
  position: absolute;
  top: 0; bottom: 0;
  width: 20px;
  pointer-events: none;
  z-index: 1;                      /* above ticks, inside the box */
  background: linear-gradient(to right, rgba(0,0,0,.25), rgba(0,0,0,0));
}
#label-compass::before { left: 0; }
#label-compass::after  { right: 0; transform: scaleX(-1); }

/* Keep tick labels tidy near edges */
.tick-label{
  max-width: 48px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
